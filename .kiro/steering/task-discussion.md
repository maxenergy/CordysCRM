# 任务讨论规则

## 核心原则

**每个任务开始前，必须与 codex MCP 或 gemini MCP 进行讨论**，确保对任务功能细节和实现逻辑有充分的理解和共识。

## 必须执行的步骤

### 1. 任务启动阶段

在开始任何编码或修改任务前，必须：

1. **转发用户原始需求**（一字不差）给 codex 或 gemini
2. **阐述你的初步分析**和实现思路
3. **讨论以下关键点**：
   - 功能边界：明确任务的范围和限制
   - 技术方案：讨论可行的实现方式
   - 潜在风险：识别可能的坑点和挑战
   - 依赖关系：确认与现有代码的交互

### 2. 讨论要求

- **充分辩驳**：不盲从任何建议，保持批判性思维
- **达成共识**：确保双方对需求理解一致
- **形成计划**：生成可执行的 step-by-step 行动计划

### 3. 选择讨论对象

| 任务类型 | 推荐讨论对象 | 原因 |
|---------|-------------|------|
| 前端 UI/样式 | Gemini | 擅长前端设计和 CSS |
| 后端逻辑 | Codex | 擅长复杂业务逻辑 |
| 架构设计 | 两者都可 | 综合考虑 |
| Bug 修复 | Codex | 精准定位能力强 |
| 需求分析 | Gemini | 任务规划能力强 |

## 工作流程

```
用户需求 → 初步分析 → 与 Codex/Gemini 讨论 → 达成共识 → 制定计划 → 开始实施
                              ↓
                    讨论内容：
                    - 功能细节
                    - 实现逻辑
                    - 边界条件
                    - 潜在风险
```

## 讨论模板

向 Codex/Gemini 发起讨论时，使用以下模板：

```
## 用户原始需求
[完整复制用户需求]

## 我的初步分析
- 任务目标：...
- 涉及模块：...
- 初步方案：...

## 需要讨论的问题
1. 这个方案是否合理？
2. 有哪些潜在的坑点？
3. 是否有更好的实现方式？
4. 边界条件如何处理？

请给出你的分析和建议。
```

## 注意事项

- **严禁跳过讨论**：即使任务看起来简单，也要进行基本讨论
- **保持会话连续性**：使用 SESSION_ID 维持对话上下文
- **记录关键决策**：讨论中的重要结论应记录下来
- **质疑与验证**：对 AI 的建议保持批判态度，必要时进行验证
